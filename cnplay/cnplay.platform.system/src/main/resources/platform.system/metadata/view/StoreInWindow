{
    "type": "Ext.window.Window",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userClassName": "StoreInWindow",
        "height": 509,
        "layout": "border",
        "modal": true,
        "resizable": [
            "false"
        ],
        "title": "入库",
        "width": 470
    },
    "name": "StoreAreaWindow1",
    "designerId": "1f2f4fe3-f048-400a-988c-26c2aa6742a7",
    "cn": [
        {
            "type": "Ext.form.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "bodyPadding": 10,
                "border": false,
                "header": false,
                "layout": "column",
                "layout|region": "center",
                "title": "编辑机构表单"
            },
            "name": "MyForm1",
            "designerId": "4e8e1911-254f-4b04-abbc-c3cb01aaf570",
            "cn": [
                {
                    "type": "Ext.form.field.Hidden",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fieldLabel": "Label",
                        "name": "id"
                    },
                    "name": "MyHiddenField1",
                    "designerId": "e8a8c80e-9394-439d-8bdc-c3a6d5cfbbfb"
                },
                {
                    "type": "Ext.panel.Panel",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "border": false,
                        "designer|snapToGrid": 10,
                        "dock": null,
                        "header": false,
                        "height": 32,
                        "layout": "absolute",
                        "title": "rfid",
                        "width": 444
                    },
                    "name": "MyPanel",
                    "designerId": "3149c3b0-a160-402b-a516-6fd9a05f68b0",
                    "cn": [
                        {
                            "type": "Ext.form.field.Text",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "allowBlank": false,
                                "blankText": null,
                                "fieldLabel": "标签号",
                                "invalidText": "机构编码不能为空！",
                                "labelAlign": "right",
                                "maxLength": null,
                                "name": "rfid",
                                "padding": 5,
                                "readOnly": true,
                                "width": 330
                            },
                            "name": "MyTextField1",
                            "designerId": "fc37c9cb-477b-4d97-8915-09e079927e4c",
                            "cn": [
                                {
                                    "type": "basiceventbinding",
                                    "reference": {
                                        "name": "listeners",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "fn": "onTextfieldAfterRender",
                                        "implHandler": [
                                            "var me = this;",
                                            "me.rfidComp = component;"
                                        ],
                                        "name": "afterrender",
                                        "scope": "me",
                                        "single": true
                                    },
                                    "name": "onTextfieldAfterRender",
                                    "designerId": "5693e148-ec73-47b2-b431-8ebb7f1e3333"
                                }
                            ]
                        },
                        {
                            "type": "Ext.button.Button",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "layout|x": 340,
                                "layout|y": 5,
                                "text": "读标签号",
                                "width": 80
                            },
                            "name": "MyButton3",
                            "designerId": "1a6f7916-44e0-4720-a07d-9b1c2f85aa14",
                            "cn": [
                                {
                                    "type": "basiceventbinding",
                                    "reference": {
                                        "name": "listeners",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "fn": "onButtonAfterRender",
                                        "implHandler": [
                                            "var me = this;",
                                            "me.rfidBtn = component;"
                                        ],
                                        "name": "afterrender",
                                        "scope": "me"
                                    },
                                    "name": "onButtonAfterRender",
                                    "designerId": "8b595ff9-37d0-4012-892d-3421acd0f068"
                                },
                                {
                                    "type": "basiceventbinding",
                                    "reference": {
                                        "name": "listeners",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "fn": "onButtonClick",
                                        "implHandler": [
                                            "var me = this;",
                                            "me.rfidBtn = button;",
                                            "me.rfidBtn.setDisabled(false);",
                                            "window.rfidRead = function(){",
                                            "    me.rfidRead();",
                                            "};",
                                            "setTimeout(window.rfidRead,1000);"
                                        ],
                                        "name": "click",
                                        "scope": "me"
                                    },
                                    "name": "onButtonClick",
                                    "designerId": "75aa1c10-54b3-4d9f-bf6c-fa5ad277a684"
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "Ext.form.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "allowBlank": false,
                        "blankText": null,
                        "fieldLabel": "物品编号",
                        "invalidText": "机构编码不能为空！",
                        "labelAlign": "right",
                        "maxLength": 10,
                        "name": "sn",
                        "padding": 5,
                        "width": 330
                    },
                    "name": "MyTextField3",
                    "designerId": "ba0ded15-2172-4fb4-bd73-235311458111"
                },
                {
                    "type": "Ext.form.Label",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "html": "<font color=red>*</font>",
                        "padding": "10 5 5 5 ",
                        "text": null
                    },
                    "name": "MyLabel",
                    "designerId": "890102b7-e9d7-4769-8e49-746942c1c2c2"
                },
                {
                    "type": "Ext.form.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "allowBlank": false,
                        "blankText": null,
                        "enforceMaxLength": true,
                        "fieldLabel": "物品名称",
                        "invalidText": "机构名称不能为空！",
                        "labelAlign": "right",
                        "maxLength": 50,
                        "maxLengthText": "机构名称最大长度不超过50个字符！",
                        "name": "name",
                        "padding": 5,
                        "width": 330
                    },
                    "name": "MyTextField2",
                    "designerId": "74e632d0-e258-478e-8bb9-712397a9926f"
                },
                {
                    "type": "Ext.form.Label",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "html": "<font color=red>*</font>",
                        "padding": "10 5 5 5 ",
                        "text": null
                    },
                    "name": "MyLabel3",
                    "designerId": "5ae58422-e351-42d3-9793-9de09c1c35b9"
                },
                {
                    "type": "Ext.form.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "allowBlank": false,
                        "blankText": null,
                        "enforceMaxLength": true,
                        "fieldLabel": "抵押物证号码",
                        "invalidText": "机构名称不能为空！",
                        "labelAlign": "right",
                        "maxLength": 50,
                        "maxLengthText": "机构名称最大长度不超过50个字符！",
                        "name": "dywId",
                        "padding": 5,
                        "width": 330
                    },
                    "name": "MyTextField",
                    "designerId": "8638428e-ac2e-40e7-9e5f-be02cfcf6d03"
                },
                {
                    "type": "Ext.form.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "allowBlank": false,
                        "blankText": null,
                        "enforceMaxLength": true,
                        "fieldLabel": "担保物品所有人",
                        "invalidText": "机构名称不能为空！",
                        "labelAlign": "right",
                        "maxLength": 50,
                        "maxLengthText": "机构名称最大长度不超过50个字符！",
                        "name": "dywOwner",
                        "padding": 5,
                        "width": 330
                    },
                    "name": "MyTextField12",
                    "designerId": "aec9b0b0-cbf0-4eb1-ab2a-665cc669a00d"
                },
                {
                    "type": "Ext.form.Label",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "html": "<font color=red>*</font>",
                        "padding": "10 5 5 5 ",
                        "text": null
                    },
                    "name": "MyLabel5",
                    "designerId": "a5558a0b-2407-47a1-ae42-e2b318919ffe"
                },
                {
                    "type": "Ext.form.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "allowBlank": false,
                        "blankText": null,
                        "enforceMaxLength": true,
                        "fieldLabel": "所有人证件号码",
                        "invalidText": "机构名称不能为空！",
                        "labelAlign": "right",
                        "maxLength": 50,
                        "maxLengthText": "机构名称最大长度不超过50个字符！",
                        "name": "dywOwnerId",
                        "padding": 5,
                        "width": 330
                    },
                    "name": "MyTextField11",
                    "designerId": "e1ff3df1-1d8e-4738-8f0a-c53823c7c25f"
                },
                {
                    "type": "Ext.form.field.Number",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "allowBlank": false,
                        "blankText": null,
                        "enforceMaxLength": true,
                        "fieldLabel": "评估价值",
                        "invalidText": "机构名称不能为空！",
                        "labelAlign": "right",
                        "maxLength": 50,
                        "maxLengthText": "机构名称最大长度不超过50个字符！",
                        "name": "pgje",
                        "padding": 5,
                        "width": 330
                    },
                    "name": "MyNumberField1",
                    "designerId": "51581ebf-f412-4b15-ac1a-92259d26ec2f"
                },
                {
                    "type": "Ext.form.field.Number",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "allowBlank": false,
                        "blankText": null,
                        "enforceMaxLength": true,
                        "fieldLabel": "抵质押金额",
                        "invalidText": "机构名称不能为空！",
                        "labelAlign": "right",
                        "maxLength": 50,
                        "maxLengthText": "机构名称最大长度不超过50个字符！",
                        "name": "jkje",
                        "padding": 5,
                        "width": 330
                    },
                    "name": "MyNumberField2",
                    "designerId": "11945c61-26a8-48f9-baad-3158aa0e32b4"
                },
                {
                    "type": "Ext.form.field.Date",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "allowBlank": false,
                        "blankText": null,
                        "editable": false,
                        "enforceMaxLength": true,
                        "fieldLabel": "表外登记日期",
                        "format": "Y年m月d日",
                        "invalidText": "机构名称不能为空！",
                        "labelAlign": "right",
                        "maxLength": 50,
                        "maxLengthText": "机构名称最大长度不超过50个字符！",
                        "name": "registerDate",
                        "padding": 5,
                        "width": 330
                    },
                    "name": "MyDateField2",
                    "designerId": "2dd18793-3ce4-4ed1-8118-21b8813a6b5c"
                },
                {
                    "type": "Ext.form.field.Hidden",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fieldLabel": "上级机构",
                        "labelAlign": "right",
                        "name": "areaId",
                        "padding": 5,
                        "width": 330
                    },
                    "name": "MyHiddenField2",
                    "designerId": "b4eabfa5-de36-4e68-b09c-3e479dd27bdf"
                },
                {
                    "type": "Ext.form.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "allowBlank": false,
                        "blankText": null,
                        "enforceMaxLength": true,
                        "fieldLabel": "保存区域",
                        "invalidText": "请选择保存区域",
                        "labelAlign": "right",
                        "maxLength": 50,
                        "maxLengthText": null,
                        "name": "areaName",
                        "padding": 5,
                        "readOnly": true,
                        "width": 330
                    },
                    "name": "MyTextField10",
                    "designerId": "5d44f2c1-a6a0-493f-955e-762994e98df5",
                    "cn": [
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onParentNameTextfieldFocus",
                                "implHandler": [
                                    "try{",
                                    "    var me = this;",
                                    "    var areaId = me.form.getForm().findField('areaId');",
                                    "    Common.showTreeSelect({",
                                    "        multiple:false,",
                                    "        url:ctxp + '/store/area/tree',",
                                    "        params:{myId:areaId},",
                                    "        callback:function(item)",
                                    "        {",
                                    "            areaId.setValue(item.id);",
                                    "            component.setValue(item.text);",
                                    "        }",
                                    "    });",
                                    "}catch(ex){}"
                                ],
                                "name": "focus",
                                "scope": "me"
                            },
                            "name": "onParentNameTextfieldFocus",
                            "designerId": "90242f84-157a-45c0-9424-3c7b4e018724"
                        }
                    ]
                },
                {
                    "type": "Ext.form.Label",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "html": "<font color=red>*</font>",
                        "padding": "10 5 5 5 ",
                        "text": null
                    },
                    "name": "MyLabel2",
                    "designerId": "c413acb8-5603-4bab-b86f-5d7b78c41c6c"
                },
                {
                    "type": "Ext.form.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "allowBlank": false,
                        "blankText": null,
                        "enforceMaxLength": true,
                        "fieldLabel": "保管人",
                        "invalidText": "机构名称不能为空！",
                        "labelAlign": "right",
                        "maxLength": 50,
                        "maxLengthText": "机构名称最大长度不超过50个字符！",
                        "name": "storeman",
                        "padding": 5,
                        "width": 330
                    },
                    "name": "MyTextField13",
                    "designerId": "2f548529-491e-44a8-881b-ab3263a301e9"
                },
                {
                    "type": "Ext.form.field.TextArea",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "enforceMaxLength": true,
                        "fieldLabel": "备注",
                        "labelAlign": "right",
                        "maxLength": 100,
                        "maxLengthText": "备注内容最大长度不超过100个字符！",
                        "name": "memo",
                        "padding": 5,
                        "width": 330
                    },
                    "name": "MyTextArea",
                    "designerId": "aa7a59c9-e438-4abf-a689-9159bbdcb778"
                },
                {
                    "type": "basiceventbinding",
                    "reference": {
                        "name": "listeners",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fn": "onFormAfterRender",
                        "implHandler": [
                            "this.form=component;"
                        ],
                        "name": "afterrender",
                        "scope": "me"
                    },
                    "name": "onFormAfterRender",
                    "designerId": "dc52a119-8644-4aef-a7cc-f1418880219d"
                }
            ]
        },
        {
            "type": "Ext.toolbar.Toolbar",
            "reference": {
                "name": "dockedItems",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "container|align": "middle",
                "container|pack": "end",
                "dock": "bottom"
            },
            "name": "MyToolbar",
            "designerId": "b0a7c3d0-c175-4dee-81d5-ba31a8fea466",
            "cn": [
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "iconCls": "icon-save",
                        "layout|flex": null,
                        "text": "保存",
                        "width": 53
                    },
                    "name": "MyButton1",
                    "designerId": "26233222-f063-41af-b479-6f822a0a02b9",
                    "cn": [
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onSaveClick",
                                "implHandler": [
                                    "",
                                    "var me = this;",
                                    "try{",
                                    "    Common.formSubmit({",
                                    "        url : ctxp+'/store/in/save',",
                                    "        form:me.form,",
                                    "        callback : function(result)",
                                    "        {",
                                    "            Ext.Msg.alert('操作提示', '保存成功！');",
                                    "            me.close();",
                                    "        }",
                                    "    });",
                                    "}catch(error){",
                                    "    Common.show({title:'操作提示',html:error.toString()});",
                                    "}"
                                ],
                                "name": "click",
                                "scope": "me"
                            },
                            "name": "onSaveClick",
                            "designerId": "85a39420-3f72-4909-925e-ee0413409661"
                        }
                    ]
                },
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "iconCls": "icon-cancel",
                        "layout|flex": null,
                        "text": "取消"
                    },
                    "name": "MyButton2",
                    "designerId": "a47eee80-4e21-40e4-ad8f-ad3d56bda5c3",
                    "cn": [
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onCancelClick",
                                "implHandler": [
                                    "var me = this;",
                                    "me.close();"
                                ],
                                "name": "click",
                                "scope": "me"
                            },
                            "name": "onCancelClick",
                            "designerId": "0e1a4ff4-f15d-48e5-8076-8fba0251e5a9"
                        }
                    ]
                }
            ]
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "id"
                ],
                "fn": "loadForm",
                "implHandler": [
                    "var me = this;",
                    "try{",
                    "    Common.ajax({",
                    "        component : me.form,",
                    "        message : '加载信息...',",
                    "        url : ctxp+'/store/area/load?id='+id,",
                    "        callback : function(result)",
                    "        {",
                    "            me.form.getForm().reset();",
                    "            me.form.getForm().setValues(result.rows);",
                    "            if(!Ext.isEmpty(id)){",
                    "                me.form.getForm().findField('code').setReadOnly(result.rows.checked);",
                    "            }",
                    "        }",
                    "    });",
                    "}",
                    "catch(error)",
                    "{",
                    "    Common.show({title:'操作提示',html:error.toString()});",
                    "}"
                ]
            },
            "name": "loadForm",
            "designerId": "e04f13b1-efed-419c-a952-28cfce27f5ba"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "rfidRead",
                "implHandler": [
                    "var me = this;",
                    "try{",
                    "    me.rfidBtn.setDisabled(false);",
                    "    Common.ajax({",
                    "        component : me.form,",
                    "        lock:false,",
                    "        url : ctxp+'/home/store/getTag',",
                    "        callback : function(result)",
                    "        {",
                    "            me.rfidBtn.setDisabled(true);",
                    "            if(result.rows === ''){",
                    "                setTimeout(window.rfidRead,2000);",
                    "            }else{",
                    "                me.rfidComp.setValue(result.rows);",
                    "                me.rfidBtn.setDisabled(false);",
                    "            }",
                    "        }",
                    "    });",
                    "}",
                    "catch(error)",
                    "{",
                    "    me.rfidBtn.setDisabled(false);",
                    "    Common.show({title:'操作提示',html:error.toString()});",
                    "}"
                ]
            },
            "name": "rfidRead",
            "designerId": "8c9ba347-3319-4365-9917-392fbece0e2c"
        },
        {
            "type": "basiceventbinding",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onWindowDestroy",
                "implHandler": [
                    "setTimeout(window.rfidRead,1000);",
                    "window.rfidRead = null;"
                ],
                "name": "destroy",
                "scope": "me"
            },
            "name": "onWindowDestroy",
            "designerId": "589cbe6d-95cf-4c5b-a9e5-6bbc4566d7a9"
        }
    ]
}